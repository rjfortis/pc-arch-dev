# --- i3wm Config (Desktop Optimized) ---
# Mod key (Mod4 = Windows key)
set $mod Mod4

# --- Fonts ---
font pango:JetBrainsMono Nerd Font 10

# --- Mouse Settings ---
focus_follows_mouse yes

# --- Essential Executions (Autostart) ---
# PolicyKit for USB mounting & Admin privileges
exec --no-startup-id /usr/bin/lxqt-policykit-agent

# PICOM
exec --no-startup-id picom -b

# Screen lock management (Simplified for Desktop)
# Removed --transfer-sleep-lock as it is laptop-specific
bindsym $mod+Shift+x exec --no-startup-id i3lock -c 000000

# Notification Daemon
exec --no-startup-id dunst

# Network Manager Applet (Ensuring icons work)
exec --no-startup-id nm-applet

# Redshift for eye protection (Color temperature only)
exec --no-startup-id redshift -x && redshift -O 4500

# --- Keybindings (Apps) ---
bindsym $mod+Return exec alacritty
bindsym $mod+d exec rofi -show drun -show-icons
bindsym $mod+Shift+q kill

# --- Audio Control (PulseAudio/Pipewire) ---
bindsym XF86AudioRaiseVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ +5%
bindsym XF86AudioLowerVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ -5%
bindsym XF86AudioMute exec --no-startup-id pactl set-sink-mute @DEFAULT_SINK@ toggle
bindsym XF86AudioMicMute exec --no-startup-id pactl set-source-mute @DEFAULT_SOURCE@ toggle

# Floating rule for Audio Control GUI
#for_window [class="Pavucontrol"] floating enable, resize set 600 400, move position center
for_window [class="pavucontrol"] floating enable, resize set 600 400, move position center

# --- Brightness Control (DISABLED - Laptop Specific) ---
# bindsym XF86MonBrightnessUp exec --no-startup-id brightnessctl set +5%
# bindsym XF86MonBrightnessDown exec --no-startup-id brightnessctl set 5%-

# Screenshot (Flameshot)
bindsym Print exec --no-startup-id flameshot gui

# --- Navigation (Vim style) ---
bindsym $mod+h focus left
bindsym $mod+j focus down
bindsym $mod+k focus up
bindsym $mod+l focus right

bindsym $mod+Shift+h move left
bindsym $mod+Shift+j move down
bindsym $mod+Shift+k move up
bindsym $mod+Shift+l move right

# --- Layout Toggle ---
bindsym $mod+f fullscreen toggle
bindsym $mod+v split v
bindsym $mod+b split h
bindsym $mod+Shift+space floating toggle
bindsym $mod+space focus mode_toggle

# --- Workspaces ---
set $ws1 "1"
set $ws2 "2"
set $ws3 "3"
set $ws4 "4"

bindsym $mod+1 workspace number $ws1
bindsym $mod+2 workspace number $ws2
bindsym $mod+3 workspace number $ws3
bindsym $mod+4 workspace number $ws4

bindsym $mod+Shift+1 move container to workspace number $ws1
bindsym $mod+Shift+2 move container to workspace number $ws2
bindsym $mod+Shift+3 move container to workspace number $ws3
bindsym $mod+Shift+4 move container to workspace number $ws4

# --- System Management ---
bindsym $mod+Shift+c reload
bindsym $mod+Shift+r restart
bindsym $mod+Shift+e exec "i3-nagbar -t warning -m 'Exit i3?' -B 'Yes' 'i3-msg exit'"

# --- Appearance ---
default_border pixel 2
default_floating_border normal 2

# Arc-Dark Color Palette
# class                 border  backgr. text    indicator child_border
client.focused          #5294e2 #5294e2 #ffffff #5294e2   #5294e2
client.focused_inactive #383c4a #383c4a #afb8c5 #4b5162   #383c4a
client.unfocused        #2f343f #2f343f #afb8c5 #2f343f   #2f343f
client.urgent           #e53935 #e53935 #ffffff #e53935   #e53935

# --- Bar Configuration ---
bar {
    status_command i3status
    position bottom
    colors {
        background #222222
        statusline #eeeeee
        separator  #666666
    }
}

# --- Modes ---
# Exit Menu
set $mode_system System (l) logout, (r) reboot, (s) shutdown
mode "$mode_system" {
    bindsym l exec --no-startup-id i3-msg exit, mode "default"
    bindsym r exec --no-startup-id systemctl reboot, mode "default"
    bindsym s exec --no-startup-id systemctl poweroff, mode "default"
    bindsym Return mode "default"
    bindsym Escape mode "default"
}
bindsym $mod+0 mode "$mode_system"

# Resize Menu
mode "resize" {
    bindsym h resize shrink width 10 px or 10 ppt
    bindsym j resize grow height 10 px or 10 ppt
    bindsym k resize shrink height 10 px or 10 ppt
    bindsym l resize grow width 10 px or 10 ppt

    bindsym Return mode "default"
    bindsym Escape mode "default"
}
bindsym $mod+r mode "resize"
